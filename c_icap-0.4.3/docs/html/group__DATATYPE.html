<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>c-icap-doc: Data type recogintion api</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Data type recogintion api<br/>
<small>
[<a class="el" href="group__API.html">API  Documentation</a>]</small>
</h1>
<p>Macros, functions and structures used for data type recognition.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct ci_magics_db *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#ga61edd8dcf006a279f7f310b5304c9127">ci_magic_db_load</a> (const char *filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the magics db from a file and create a ci_magics_db object.  <a href="#ga61edd8dcf006a279f7f310b5304c9127"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#gafe67d34b80c1d9e4025201a8e54bd6d0">ci_magic_req_data_type</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, int *isencoded)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the type of data of an c-icap request object.  <a href="#gafe67d34b80c1d9e4025201a8e54bd6d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#ga46e48196d9902618161bdc1e160e8c00">ci_magic_type_id</a> (const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds the type id from type name.  <a href="#ga46e48196d9902618161bdc1e160e8c00"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#ga5f080fa00aab37ca373b4b695d68aafa">ci_magic_group_id</a> (const char *group)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds the group id from group name.  <a href="#ga5f080fa00aab37ca373b4b695d68aafa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#ga7982eeaaf7bec51490a0409382db447a">ci_magic_group_check</a> (int type, int group)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if a magic type belongs to a magic types group.  <a href="#ga7982eeaaf7bec51490a0409382db447a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#ga4b6d1fb7ebd31e751d2bae64e7ee042b">ci_magic_types_count</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of types stored in internal magic db.  <a href="#ga4b6d1fb7ebd31e751d2bae64e7ee042b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#gabf2d67fabccd0c3776d628345413d5ae">ci_magic_groups_count</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of groups stored in internal magic db.  <a href="#gabf2d67fabccd0c3776d628345413d5ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#ga2d765f13e58b595e7a95ec025118af8b">ci_magic_type_name</a> (int type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the name of a magic type.  <a href="#ga2d765f13e58b595e7a95ec025118af8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#gaea712bbaee4aff2770275cd61a9bf92b">ci_magic_type_descr</a> (int type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the short description of a magic type.  <a href="#gaea712bbaee4aff2770275cd61a9bf92b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DATATYPE.html#ga0862bc88a22fcb42f18b2a48bf56ddd0">ci_magic_group_name</a> (int group)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the name of a magic types group.  <a href="#ga0862bc88a22fcb42f18b2a48bf56ddd0"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Macros, functions and structures used for data type recognition. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga61edd8dcf006a279f7f310b5304c9127"></a><!-- doxytag: member="filetype.h::ci_magic_db_load" ref="ga61edd8dcf006a279f7f310b5304c9127" args="(const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct ci_magics_db* ci_magic_db_load </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the magics db from a file and create a ci_magics_db object. </p>
<p>The user normaly does not need to call this function inside c-icap server. It is not a thread safe function, should called only during icap library initialization before threads started. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>is the name of the file contains the db </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to a ci_magics_db object </dd></dl>

</div>
</div>
<a class="anchor" id="ga7982eeaaf7bec51490a0409382db447a"></a><!-- doxytag: member="filetype.h::ci_magic_group_check" ref="ga7982eeaaf7bec51490a0409382db447a" args="(int type, int group)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_magic_group_check </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>group</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if a magic type belongs to a magic types group. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>is the type id to check </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>group</em>&nbsp;</td><td>is the group id </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non zero if the type belongs to group, zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga5f080fa00aab37ca373b4b695d68aafa"></a><!-- doxytag: member="filetype.h::ci_magic_group_id" ref="ga5f080fa00aab37ca373b4b695d68aafa" args="(const char *group)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_magic_group_id </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>group</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds the group id from group name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>group</em>&nbsp;</td><td>is the name of the group </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the group id </dd></dl>

</div>
</div>
<a class="anchor" id="ga0862bc88a22fcb42f18b2a48bf56ddd0"></a><!-- doxytag: member="filetype.h::ci_magic_group_name" ref="ga0862bc88a22fcb42f18b2a48bf56ddd0" args="(int group)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ci_magic_group_name </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>group</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the name of a magic types group. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>group</em>&nbsp;</td><td>the group id </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the name of the group or NULL if the group does not exists </dd></dl>

</div>
</div>
<a class="anchor" id="gabf2d67fabccd0c3776d628345413d5ae"></a><!-- doxytag: member="filetype.h::ci_magic_groups_count" ref="gabf2d67fabccd0c3776d628345413d5ae" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_magic_groups_count </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of groups stored in internal magic db. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of stored magic groups </dd></dl>

</div>
</div>
<a class="anchor" id="gafe67d34b80c1d9e4025201a8e54bd6d0"></a><!-- doxytag: member="filetype.h::ci_magic_req_data_type" ref="gafe67d34b80c1d9e4025201a8e54bd6d0" args="(ci_request_t *req, int *isencoded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_magic_req_data_type </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>isencoded</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the type of data of an c-icap request object. </p>
<p>This function checks the preview data of the request. If the data are encoded this function try to uncompress them before data type recognition</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>the c-icap request (ci_request_t) data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>isencoded</em>&nbsp;</td><td>set to CI_ENCODE_GZIP, CI_ENCODE_DEFLATE or CI_ENCODE_UNKNOWN if the data are encoded with an unknown method </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the data type or -1 if the data type recognition fails for a reason (eg no preview data, of library not initialized) </dd></dl>

</div>
</div>
<a class="anchor" id="gaea712bbaee4aff2770275cd61a9bf92b"></a><!-- doxytag: member="filetype.h::ci_magic_type_descr" ref="gaea712bbaee4aff2770275cd61a9bf92b" args="(int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ci_magic_type_descr </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the short description of a magic type. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>the type id </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the short description if the type or NULL if the type does not exists </dd></dl>

</div>
</div>
<a class="anchor" id="ga46e48196d9902618161bdc1e160e8c00"></a><!-- doxytag: member="filetype.h::ci_magic_type_id" ref="ga46e48196d9902618161bdc1e160e8c00" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_magic_type_id </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds the type id from type name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>is the name of the magic type </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the type id </dd></dl>

</div>
</div>
<a class="anchor" id="ga2d765f13e58b595e7a95ec025118af8b"></a><!-- doxytag: member="filetype.h::ci_magic_type_name" ref="ga2d765f13e58b595e7a95ec025118af8b" args="(int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ci_magic_type_name </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the name of a magic type. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>the type id </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the name of the type or NULL if the type does not exists </dd></dl>

</div>
</div>
<a class="anchor" id="ga4b6d1fb7ebd31e751d2bae64e7ee042b"></a><!-- doxytag: member="filetype.h::ci_magic_types_count" ref="ga4b6d1fb7ebd31e751d2bae64e7ee042b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_magic_types_count </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of types stored in internal magic db. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of stored magic types </dd></dl>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 14 Jun 2016 for c-icap-doc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
