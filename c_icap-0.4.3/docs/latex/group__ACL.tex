\hypertarget{group__ACL}{
\section{Access lists API}
\label{group__ACL}\index{Access lists API@{Access lists API}}
}


Access control lists related API.  
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structci__acl__type}{ci\_\-acl\_\-type}
\begin{DoxyCompactList}\small\item\em This is the struct used to implement an acl type object. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__ACL_ga97ecc1266c385bfb873e93992845a592}{
typedef struct \hyperlink{structci__acl__type}{ci\_\-acl\_\-type} \hyperlink{group__ACL_ga97ecc1266c385bfb873e93992845a592}{ci\_\-acl\_\-type\_\-t}}
\label{group__ACL_ga97ecc1266c385bfb873e93992845a592}

\begin{DoxyCompactList}\small\item\em This is the struct used to implement an acl type object. \item\end{DoxyCompactList}\item 
typedef struct ci\_\-acl\_\-spec \hyperlink{group__ACL_ga2f65107a03de82fff4ae2e1340195a7f}{ci\_\-acl\_\-spec\_\-t}
\begin{DoxyCompactList}\small\item\em This struct holds an access control list (acl). \item\end{DoxyCompactList}\item 
typedef struct ci\_\-access\_\-entry \hyperlink{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}{ci\_\-access\_\-entry\_\-t}
\begin{DoxyCompactList}\small\item\em An access entry object holds an access control list, and can be connected to linked lists of access entries. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}{ci\_\-access\_\-entry\_\-t} $\ast$ \hyperlink{group__ACL_ga8b59d23a19247a61b2df28fc59105857}{ci\_\-access\_\-entry\_\-new} (\hyperlink{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}{ci\_\-access\_\-entry\_\-t} $\ast$$\ast$list, int type)
\begin{DoxyCompactList}\small\item\em Append a new access entry object to an access entries list. \item\end{DoxyCompactList}\item 
void \hyperlink{group__ACL_ga46037760b7492e44238569bfce1174d8}{ci\_\-access\_\-entry\_\-release} (\hyperlink{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}{ci\_\-access\_\-entry\_\-t} $\ast$list)
\begin{DoxyCompactList}\small\item\em Destroy an access entries list. \item\end{DoxyCompactList}\item 
int \hyperlink{group__ACL_ga9ed5d0d0d59486ddb28453c9fcda9fc9}{ci\_\-access\_\-entry\_\-add\_\-acl\_\-by\_\-name} (\hyperlink{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}{ci\_\-access\_\-entry\_\-t} $\ast$access\_\-entry, const char $\ast$aclname)
\begin{DoxyCompactList}\small\item\em Add an acl to an access entry object. \item\end{DoxyCompactList}\item 
int \hyperlink{group__ACL_ga8e5833ad80ae63dc66bff07f398f0d89}{ci\_\-access\_\-entry\_\-match\_\-request} (\hyperlink{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}{ci\_\-access\_\-entry\_\-t} $\ast$access\_\-entry, \hyperlink{group__REQUEST_ga27da5c4ae491f527ce36901c2e78ea04}{ci\_\-request\_\-t} $\ast$req)
\begin{DoxyCompactList}\small\item\em Check if an access entries list matches a request object. \item\end{DoxyCompactList}\item 
void \hyperlink{group__ACL_ga41b34ceca3b185d3211b93247b9740e4}{ci\_\-acl\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initializes the c-\/icap acl subsystem. \item\end{DoxyCompactList}\item 
void \hyperlink{group__ACL_gafaff86f39deca56d4cfa2b86e9a333d9}{ci\_\-acl\_\-reset} ()
\begin{DoxyCompactList}\small\item\em Resets the c-\/icap acl subsystem. \item\end{DoxyCompactList}\item 
const \hyperlink{structci__acl__type}{ci\_\-acl\_\-type\_\-t} $\ast$ \hyperlink{group__ACL_ga7ee2105ebc7574e0e0a73e9a0069cbdb}{ci\_\-acl\_\-type\_\-search} (const char $\ast$name)
\begin{DoxyCompactList}\small\item\em Search for an acl type. \item\end{DoxyCompactList}\item 
int \hyperlink{group__ACL_ga20a6c804c70afdb1fe0ec28a516e113f}{ci\_\-acl\_\-type\_\-add} (const \hyperlink{structci__acl__type}{ci\_\-acl\_\-type\_\-t} $\ast$type)
\begin{DoxyCompactList}\small\item\em Add a custom acl type to the c-\/icap acl subsystem. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Access control lists related API. Structures, functions and macros used to define custom acl types, and use access control lists in services and modules. 

\subsection{Typedef Documentation}
\hypertarget{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}{
\index{ACL@{ACL}!ci\_\-access\_\-entry\_\-t@{ci\_\-access\_\-entry\_\-t}}
\index{ci\_\-access\_\-entry\_\-t@{ci\_\-access\_\-entry\_\-t}!ACL@{ACL}}
\subsubsection[{ci\_\-access\_\-entry\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct ci\_\-access\_\-entry {\bf ci\_\-access\_\-entry\_\-t}}}
\label{group__ACL_ga569aa156e347e7912a7bf8610c1f6ca3}


An access entry object holds an access control list, and can be connected to linked lists of access entries. This struct used to implement lists of access control lists. Each access entry can hold an \char`\"{}allow\char`\"{} or \char`\"{}deny\char`\"{} access control list. An access entries list represents the following c-\/icap config lines: 
\begin{DoxyCode}
  icap_access allow LOCALNET LOCALHOST
  icap_access deny ALL
\end{DoxyCode}
 each of the above lines represented by an ci\_\-access\_\-entry object. The ci\_\-access\_\-entry objects can be connected to a simple linked list. \hypertarget{group__ACL_ga2f65107a03de82fff4ae2e1340195a7f}{
\index{ACL@{ACL}!ci\_\-acl\_\-spec\_\-t@{ci\_\-acl\_\-spec\_\-t}}
\index{ci\_\-acl\_\-spec\_\-t@{ci\_\-acl\_\-spec\_\-t}!ACL@{ACL}}
\subsubsection[{ci\_\-acl\_\-spec\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct ci\_\-acl\_\-spec {\bf ci\_\-acl\_\-spec\_\-t}}}
\label{group__ACL_ga2f65107a03de82fff4ae2e1340195a7f}


This struct holds an access control list (acl). Imagine the following access control list defined in the c-\/icap config file:\par
 
\begin{DoxyCode}
 acl LOCALNET 127.0.0.1/255.255.255.255 192.168.1.0/255.255.255.0
\end{DoxyCode}
 This struct represents access control lists like the above 

\subsection{Function Documentation}
\hypertarget{group__ACL_ga9ed5d0d0d59486ddb28453c9fcda9fc9}{
\index{ACL@{ACL}!ci\_\-access\_\-entry\_\-add\_\-acl\_\-by\_\-name@{ci\_\-access\_\-entry\_\-add\_\-acl\_\-by\_\-name}}
\index{ci\_\-access\_\-entry\_\-add\_\-acl\_\-by\_\-name@{ci\_\-access\_\-entry\_\-add\_\-acl\_\-by\_\-name}!ACL@{ACL}}
\subsubsection[{ci\_\-access\_\-entry\_\-add\_\-acl\_\-by\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-access\_\-entry\_\-add\_\-acl\_\-by\_\-name ({\bf ci\_\-access\_\-entry\_\-t} $\ast$ {\em access\_\-entry}, \/  const char $\ast$ {\em aclname})}}
\label{group__ACL_ga9ed5d0d0d59486ddb28453c9fcda9fc9}


Add an acl to an access entry object. 
\begin{DoxyParams}{Parameters}
\item[{\em access\_\-entry}]Pointer to the access entry object \item[{\em aclname}]The name of the acl to be added. \end{DoxyParams}
\begin{DoxyReturn}{Returns}
non zero on success, zero otherwise 
\end{DoxyReturn}
\hypertarget{group__ACL_ga8e5833ad80ae63dc66bff07f398f0d89}{
\index{ACL@{ACL}!ci\_\-access\_\-entry\_\-match\_\-request@{ci\_\-access\_\-entry\_\-match\_\-request}}
\index{ci\_\-access\_\-entry\_\-match\_\-request@{ci\_\-access\_\-entry\_\-match\_\-request}!ACL@{ACL}}
\subsubsection[{ci\_\-access\_\-entry\_\-match\_\-request}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-access\_\-entry\_\-match\_\-request ({\bf ci\_\-access\_\-entry\_\-t} $\ast$ {\em access\_\-entry}, \/  {\bf ci\_\-request\_\-t} $\ast$ {\em req})}}
\label{group__ACL_ga8e5833ad80ae63dc66bff07f398f0d89}


Check if an access entries list matches a request object. 
\begin{DoxyParams}{Parameters}
\item[{\em access\_\-entry}]Pointer to the access entries list (a linked list of ci\_\-access\_\-entry\_\-t objects) \item[{\em req}]pointer to the request object (ci\_\-request\_\-t object) \end{DoxyParams}
\begin{DoxyReturn}{Returns}
CI\_\-ACCESS\_\-ALLOW if request matches the access list, CI\_\-ACCESS\_\-DENY otherwise 
\end{DoxyReturn}
\hypertarget{group__ACL_ga8b59d23a19247a61b2df28fc59105857}{
\index{ACL@{ACL}!ci\_\-access\_\-entry\_\-new@{ci\_\-access\_\-entry\_\-new}}
\index{ci\_\-access\_\-entry\_\-new@{ci\_\-access\_\-entry\_\-new}!ACL@{ACL}}
\subsubsection[{ci\_\-access\_\-entry\_\-new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ci\_\-access\_\-entry\_\-t}$\ast$ ci\_\-access\_\-entry\_\-new ({\bf ci\_\-access\_\-entry\_\-t} $\ast$$\ast$ {\em list}, \/  int {\em type})}}
\label{group__ACL_ga8b59d23a19247a61b2df28fc59105857}


Append a new access entry object to an access entries list. 
\begin{DoxyParams}{Parameters}
\item[{\em list}]Pointer to the access entry list \item[{\em type}]CI\_\-ACCESS\_\-ALLOW if CI\_\-ACCESS\_\-DENY to specify if this access entry holds an \char`\"{}allow\char`\"{} or \char`\"{}deny\char`\"{} access control list \end{DoxyParams}
\begin{DoxyReturn}{Returns}
A pointer to the newly created access entry object 
\end{DoxyReturn}
\hypertarget{group__ACL_ga46037760b7492e44238569bfce1174d8}{
\index{ACL@{ACL}!ci\_\-access\_\-entry\_\-release@{ci\_\-access\_\-entry\_\-release}}
\index{ci\_\-access\_\-entry\_\-release@{ci\_\-access\_\-entry\_\-release}!ACL@{ACL}}
\subsubsection[{ci\_\-access\_\-entry\_\-release}]{\setlength{\rightskip}{0pt plus 5cm}void ci\_\-access\_\-entry\_\-release ({\bf ci\_\-access\_\-entry\_\-t} $\ast$ {\em list})}}
\label{group__ACL_ga46037760b7492e44238569bfce1174d8}


Destroy an access entries list. 
\begin{DoxyParams}{Parameters}
\item[{\em list}]Pointer to the access entries list \end{DoxyParams}
\hypertarget{group__ACL_ga41b34ceca3b185d3211b93247b9740e4}{
\index{ACL@{ACL}!ci\_\-acl\_\-init@{ci\_\-acl\_\-init}}
\index{ci\_\-acl\_\-init@{ci\_\-acl\_\-init}!ACL@{ACL}}
\subsubsection[{ci\_\-acl\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void ci\_\-acl\_\-init ()}}
\label{group__ACL_ga41b34ceca3b185d3211b93247b9740e4}


Initializes the c-\/icap acl subsystem. It is not thread safe \hypertarget{group__ACL_gafaff86f39deca56d4cfa2b86e9a333d9}{
\index{ACL@{ACL}!ci\_\-acl\_\-reset@{ci\_\-acl\_\-reset}}
\index{ci\_\-acl\_\-reset@{ci\_\-acl\_\-reset}!ACL@{ACL}}
\subsubsection[{ci\_\-acl\_\-reset}]{\setlength{\rightskip}{0pt plus 5cm}void ci\_\-acl\_\-reset ()}}
\label{group__ACL_gafaff86f39deca56d4cfa2b86e9a333d9}


Resets the c-\/icap acl subsystem. It is not thread safe \hypertarget{group__ACL_ga20a6c804c70afdb1fe0ec28a516e113f}{
\index{ACL@{ACL}!ci\_\-acl\_\-type\_\-add@{ci\_\-acl\_\-type\_\-add}}
\index{ci\_\-acl\_\-type\_\-add@{ci\_\-acl\_\-type\_\-add}!ACL@{ACL}}
\subsubsection[{ci\_\-acl\_\-type\_\-add}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-acl\_\-type\_\-add (const {\bf ci\_\-acl\_\-type\_\-t} $\ast$ {\em type})}}
\label{group__ACL_ga20a6c804c70afdb1fe0ec28a516e113f}


Add a custom acl type to the c-\/icap acl subsystem. 
\begin{DoxyParams}{Parameters}
\item[{\em type}]Pointer to the c-\/acl\_\-type\_\-t struct which implements the acl type \end{DoxyParams}
\begin{DoxyReturn}{Returns}
non zero on success, zero otherwise 
\end{DoxyReturn}
\hypertarget{group__ACL_ga7ee2105ebc7574e0e0a73e9a0069cbdb}{
\index{ACL@{ACL}!ci\_\-acl\_\-type\_\-search@{ci\_\-acl\_\-type\_\-search}}
\index{ci\_\-acl\_\-type\_\-search@{ci\_\-acl\_\-type\_\-search}!ACL@{ACL}}
\subsubsection[{ci\_\-acl\_\-type\_\-search}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf ci\_\-acl\_\-type\_\-t}$\ast$ ci\_\-acl\_\-type\_\-search (const char $\ast$ {\em name})}}
\label{group__ACL_ga7ee2105ebc7574e0e0a73e9a0069cbdb}


Search for an acl type. 
\begin{DoxyParams}{Parameters}
\item[{\em name}]The name of the acl type \end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the ci\_\-acl\_\-type\_\-t structure which implements the acl type, or NULL 
\end{DoxyReturn}
