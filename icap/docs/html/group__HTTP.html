<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>c-icap-doc: API for HTTP object manipulation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>API for HTTP object manipulation<br/>
<small>
[<a class="el" href="group__API.html">API  Documentation</a>]</small>
</h1>
<p>Macros, functions and structures used for manipulating the encupsulated HTTP objects (HTTP requests or HTTP responses).  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__HEADERS.html#gaaa203ac92dd0242ab66f4237548d7260">ci_headers_list_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga4572d0ede7cad4215c9fc2cb3a629b56">ci_http_response_headers</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the HTTP response headers.  <a href="#ga4572d0ede7cad4215c9fc2cb3a629b56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__HEADERS.html#gaaa203ac92dd0242ab66f4237548d7260">ci_headers_list_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga540aa605e981d0b57f940bea6e37c40b">ci_http_request_headers</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the HTTP request headers.  <a href="#ga540aa605e981d0b57f940bea6e37c40b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga9e70a82a932d48d33da3e9e8487c0d6b">ci_http_response_add_header</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, const char *header)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a custom header to the HTTP response headers.  <a href="#ga9e70a82a932d48d33da3e9e8487c0d6b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga2771dada488942b12bcc60ae1ea35574">ci_http_request_add_header</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, const char *header)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a custom header to the HTTP request headers.  <a href="#ga2771dada488942b12bcc60ae1ea35574"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#gaba2bdcc434b345bf0488673e24c0e01c">ci_http_response_remove_header</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, const char *header)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a header from the HTTP response headers.  <a href="#gaba2bdcc434b345bf0488673e24c0e01c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga7ec5f6a8150e6caa316521b60c6511ef">ci_http_request_remove_header</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, const char *header)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a header from the HTTP request headers.  <a href="#ga7ec5f6a8150e6caa316521b60c6511ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga250fece2ce100062dc38b24e540cf597">ci_http_response_get_header</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, const char *head_name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the value of the requested header from the HTTP response headers.  <a href="#ga250fece2ce100062dc38b24e540cf597"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#gaff9411231824ac06df9edfe1e36e5ba2">ci_http_request_get_header</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, const char *head_name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the value of the requested header from the HTTP request headers.  <a href="#gaff9411231824ac06df9edfe1e36e5ba2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga2b27cdeba155520463363bf341182dc7">ci_http_response_reset_headers</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Completelly erase and initialize the HTTP response headers.  <a href="#ga2b27cdeba155520463363bf341182dc7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga22c5b174646f510f0c8d8fbb5c112ef2">ci_http_request_reset_headers</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Completelly erase and initialize the HTTP request headers.  <a href="#ga22c5b174646f510f0c8d8fbb5c112ef2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#gaad9f358ca7cd20aeca59b954b0d69a02">ci_http_response_create</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, int has_reshdr, int has_body)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new HTTP response.  <a href="#gaad9f358ca7cd20aeca59b954b0d69a02"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga7c44c88b00ba822fdeffa9bef6a83adf">ci_http_request_create</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, int has_body)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new HTTP request.  <a href="#ga7c44c88b00ba822fdeffa9bef6a83adf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ci_off_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#gad381fe7908af08f1543c858d24cfbfdf">ci_http_content_length</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the value of the Content-Length header of the HTTP response or HTTP request for a response modification or request modification ICAP requests respectively.  <a href="#gad381fe7908af08f1543c858d24cfbfdf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga44e273b39d82a7c8f13f70586760b130">ci_http_request</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the request line (e.g "GET /index.html HTTP 1.0") from http request headers.  <a href="#ga44e273b39d82a7c8f13f70586760b130"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#gac1081e7bbfaa5ac736621a0a17cd703c">ci_http_request_url</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req, char *buf, int buf_size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the URL (e.g "http://www.chtsanti.net") from http request.  <a href="#gac1081e7bbfaa5ac736621a0a17cd703c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const ci_ip_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HTTP.html#ga12509ca0255deacf0f8446bdd2f42495">ci_http_client_ip</a> (<a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the http client ip address if this information is available.  <a href="#ga12509ca0255deacf0f8446bdd2f42495"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Macros, functions and structures used for manipulating the encupsulated HTTP objects (HTTP requests or HTTP responses). </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga12509ca0255deacf0f8446bdd2f42495"></a><!-- doxytag: member="simple_api.h::ci_http_client_ip" ref="ga12509ca0255deacf0f8446bdd2f42495" args="(ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ci_ip_t* ci_http_client_ip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the http client ip address if this information is available. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A const pointer to a ci_ip_t object contain the client ip address or NULL </dd></dl>

</div>
</div>
<a class="anchor" id="gad381fe7908af08f1543c858d24cfbfdf"></a><!-- doxytag: member="simple_api.h::ci_http_content_length" ref="gad381fe7908af08f1543c858d24cfbfdf" args="(ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ci_off_t ci_http_content_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the value of the Content-Length header of the HTTP response or HTTP request for a response modification or request modification ICAP requests respectively. </p>
<p>If the header Content-Length is not included in HTTP response It can be used with both request and response modification ICAP requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The content length on success or a negative number otherwise </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="services_2echo_2srv__echo_8c-example.html#a7">services/echo/srv_echo.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga44e273b39d82a7c8f13f70586760b130"></a><!-- doxytag: member="simple_api.h::ci_http_request" ref="ga44e273b39d82a7c8f13f70586760b130" args="(ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ci_http_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the request line (e.g "GET /index.html HTTP 1.0") from http request headers. </p>
<p>It can be used with both request and response modification ICAP requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The request line in success or NULL otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga2771dada488942b12bcc60ae1ea35574"></a><!-- doxytag: member="simple_api.h::ci_http_request_add_header" ref="ga2771dada488942b12bcc60ae1ea35574" args="(ci_request_t *req, const char *header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ci_http_request_add_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>header</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a custom header to the HTTP request headers. </p>
<p>This function can used to add custom headers to the HTTP request and can be used only for request modification ICAP requests </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>is a string contains the header in the form "Header: value" </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the header or NULL if fails. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7c44c88b00ba822fdeffa9bef6a83adf"></a><!-- doxytag: member="simple_api.h::ci_http_request_create" ref="ga7c44c88b00ba822fdeffa9bef6a83adf" args="(ci_request_t *req, int has_body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_http_request_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>has_body</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new HTTP request. </p>
<p>This function is usefull to develop icap clients </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>has_body</em>&nbsp;</td><td>if it is non zero the HTTP request contains HTTP body data </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non zero on success zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="gaff9411231824ac06df9edfe1e36e5ba2"></a><!-- doxytag: member="simple_api.h::ci_http_request_get_header" ref="gaff9411231824ac06df9edfe1e36e5ba2" args="(ci_request_t *req, const char *head_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ci_http_request_get_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>head_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the value of the requested header from the HTTP request headers. </p>
<p>This function can used to get the value of a header from the HTTP request headers. It can be used on both request and response modification ICAP requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head_name</em>&nbsp;</td><td>is a string contains the header name </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A string with the header value on success NULL otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga540aa605e981d0b57f940bea6e37c40b"></a><!-- doxytag: member="simple_api.h::ci_http_request_headers" ref="ga540aa605e981d0b57f940bea6e37c40b" args="(ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__HEADERS.html#gaaa203ac92dd0242ab66f4237548d7260">ci_headers_list_t</a>* ci_http_request_headers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the HTTP request headers. </p>
<p>This function can used for an responce or request modification ICAP request to get the HTTP request headers </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the HTTP request headers or NULL if fails. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7ec5f6a8150e6caa316521b60c6511ef"></a><!-- doxytag: member="simple_api.h::ci_http_request_remove_header" ref="ga7ec5f6a8150e6caa316521b60c6511ef" args="(ci_request_t *req, const char *header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_http_request_remove_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>header</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove a header from the HTTP request headers. </p>
<p>This function can used to remove a header from the HTTP request and can be used only for request modification ICAP requests </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>is a string contains the header name </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Non zero if success or zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga22c5b174646f510f0c8d8fbb5c112ef2"></a><!-- doxytag: member="simple_api.h::ci_http_request_reset_headers" ref="ga22c5b174646f510f0c8d8fbb5c112ef2" args="(ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_http_request_reset_headers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Completelly erase and initialize the HTTP request headers. </p>
<p>This function is usefull when an HTTP request required should replaced by an other.After this function called, the HTTP request should filled with new HTTP headers, before send back to the ICAP client. It can be used to implement a HTTP redirector. It can be used with request modification ICAP requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non zero on success zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="gac1081e7bbfaa5ac736621a0a17cd703c"></a><!-- doxytag: member="simple_api.h::ci_http_request_url" ref="gac1081e7bbfaa5ac736621a0a17cd703c" args="(ci_request_t *req, char *buf, int buf_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_http_request_url </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>buf_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the URL (e.g "http://www.chtsanti.net") from http request. </p>
<p>It can be used with both request and response modification ICAP requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>a buffer to store the url </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf_size</em>&nbsp;</td><td>the "buf" buffer size </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The bytes written to the "buf" buffer </dd></dl>

</div>
</div>
<a class="anchor" id="ga9e70a82a932d48d33da3e9e8487c0d6b"></a><!-- doxytag: member="simple_api.h::ci_http_response_add_header" ref="ga9e70a82a932d48d33da3e9e8487c0d6b" args="(ci_request_t *req, const char *header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ci_http_response_add_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>header</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a custom header to the HTTP response headers. </p>
<p>This function can used to add custom headers to the HTTP response and can be used only for response modification ICAP requests </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>is a string contains the header in the form "Header: value" </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the header or NULL if fails. </dd></dl>

</div>
</div>
<a class="anchor" id="gaad9f358ca7cd20aeca59b954b0d69a02"></a><!-- doxytag: member="simple_api.h::ci_http_response_create" ref="gaad9f358ca7cd20aeca59b954b0d69a02" args="(ci_request_t *req, int has_reshdr, int has_body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_http_response_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>has_reshdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>has_body</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new HTTP response. </p>
<p>This function is usefull when the service wants to respond with a self created message to a response or request modification ICAP request. It can be used with both request and response modification ICAP requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>has_reshdr</em>&nbsp;</td><td>if it is non zero the HTTP response contrains HTTP headers (a non HTTP 0.9 response) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>has_body</em>&nbsp;</td><td>if it is non zero the HTTP response contains HTTP body data </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non zero on success zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga250fece2ce100062dc38b24e540cf597"></a><!-- doxytag: member="simple_api.h::ci_http_response_get_header" ref="ga250fece2ce100062dc38b24e540cf597" args="(ci_request_t *req, const char *head_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ci_http_response_get_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>head_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the value of the requested header from the HTTP response headers. </p>
<p>This function can used to get the value of a header from the HTTP response headers. It can be used only for response modification ICAP requests </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>head_name</em>&nbsp;</td><td>is a string contains the header name </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A string with the header value on success NULL otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga4572d0ede7cad4215c9fc2cb3a629b56"></a><!-- doxytag: member="simple_api.h::ci_http_response_headers" ref="ga4572d0ede7cad4215c9fc2cb3a629b56" args="(ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__HEADERS.html#gaaa203ac92dd0242ab66f4237548d7260">ci_headers_list_t</a>* ci_http_response_headers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the HTTP response headers. </p>
<p>This function is only valid for an ICAP responce modification request. If the ICAP request is not responce modification ICAP request or there are not response headers (HTTP 0.9) the function returns NULL. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>A pointer to the current ICAP request object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the HTTP response headers or NULL. </dd></dl>

</div>
</div>
<a class="anchor" id="gaba2bdcc434b345bf0488673e24c0e01c"></a><!-- doxytag: member="simple_api.h::ci_http_response_remove_header" ref="gaba2bdcc434b345bf0488673e24c0e01c" args="(ci_request_t *req, const char *header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_http_response_remove_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>header</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove a header from the HTTP response headers. </p>
<p>This function can used to remove a header from the HTTP response and can be used only for response modification ICAP requests </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>is a string contains the header name </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Non zero if success or zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga2b27cdeba155520463363bf341182dc7"></a><!-- doxytag: member="simple_api.h::ci_http_response_reset_headers" ref="ga2b27cdeba155520463363bf341182dc7" args="(ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_http_response_reset_headers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Completelly erase and initialize the HTTP response headers. </p>
<p>This function is usefull when the full rewrite of the HTTP response required. After this function called, the HTTP response should filled with new HTTP headers, before send back to the ICAP client. An example of usage of this function is in antivirus service when a virus detected in HTTP response, so the service blocks the response and sends a new HTTP object (a new html page, with HTTP headers) informing the user about the virus. It can be used with response modification ICAP requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>is a pointer to the current ICAP request object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non zero on success zero otherwise </dd></dl>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 14 Jun 2016 for c-icap-doc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
