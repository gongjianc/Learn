<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>c-icap-doc: Access lists API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Access lists API<br/>
<small>
[<a class="el" href="group__API.html">API  Documentation</a>]</small>
</h1>
<p>Access control lists related API.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structci__acl__type.html">ci_acl_type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the struct used to implement an acl type object.  <a href="structci__acl__type.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga97ecc1266c385bfb873e93992845a592"></a><!-- doxytag: member="ACL::ci_acl_type_t" ref="ga97ecc1266c385bfb873e93992845a592" args="" -->
typedef struct <a class="el" href="structci__acl__type.html">ci_acl_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga97ecc1266c385bfb873e93992845a592">ci_acl_type_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the struct used to implement an acl type object. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct ci_acl_spec&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga2f65107a03de82fff4ae2e1340195a7f">ci_acl_spec_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This struct holds an access control list (acl).  <a href="#ga2f65107a03de82fff4ae2e1340195a7f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct ci_access_entry&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An access entry object holds an access control list, and can be connected to linked lists of access entries.  <a href="#ga569aa156e347e7912a7bf8610c1f6ca3"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga8b59d23a19247a61b2df28fc59105857">ci_access_entry_new</a> (<a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> **list, int type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append a new access entry object to an access entries list.  <a href="#ga8b59d23a19247a61b2df28fc59105857"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga46037760b7492e44238569bfce1174d8">ci_access_entry_release</a> (<a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> *list)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy an access entries list.  <a href="#ga46037760b7492e44238569bfce1174d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga9ed5d0d0d59486ddb28453c9fcda9fc9">ci_access_entry_add_acl_by_name</a> (<a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> *access_entry, const char *aclname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add an acl to an access entry object.  <a href="#ga9ed5d0d0d59486ddb28453c9fcda9fc9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga8e5833ad80ae63dc66bff07f398f0d89">ci_access_entry_match_request</a> (<a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> *access_entry, <a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if an access entries list matches a request object.  <a href="#ga8e5833ad80ae63dc66bff07f398f0d89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga41b34ceca3b185d3211b93247b9740e4">ci_acl_init</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the c-icap acl subsystem.  <a href="#ga41b34ceca3b185d3211b93247b9740e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#gafaff86f39deca56d4cfa2b86e9a333d9">ci_acl_reset</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resets the c-icap acl subsystem.  <a href="#gafaff86f39deca56d4cfa2b86e9a333d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structci__acl__type.html">ci_acl_type_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga7ee2105ebc7574e0e0a73e9a0069cbdb">ci_acl_type_search</a> (const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Search for an acl type.  <a href="#ga7ee2105ebc7574e0e0a73e9a0069cbdb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACL.html#ga20a6c804c70afdb1fe0ec28a516e113f">ci_acl_type_add</a> (const <a class="el" href="structci__acl__type.html">ci_acl_type_t</a> *type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a custom acl type to the c-icap acl subsystem.  <a href="#ga20a6c804c70afdb1fe0ec28a516e113f"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Access control lists related API. </p>
<p>Structures, functions and macros used to define custom acl types, and use access control lists in services and modules. </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga569aa156e347e7912a7bf8610c1f6ca3"></a><!-- doxytag: member="acl.h::ci_access_entry_t" ref="ga569aa156e347e7912a7bf8610c1f6ca3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct ci_access_entry <a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An access entry object holds an access control list, and can be connected to linked lists of access entries. </p>
<p>This struct used to implement lists of access control lists. Each access entry can hold an "allow" or "deny" access control list. An access entries list represents the following c-icap config lines: </p>
<div class="fragment"><pre class="fragment">  icap_access allow LOCALNET LOCALHOST
  icap_access deny ALL
</pre></div><p> each of the above lines represented by an ci_access_entry object. The ci_access_entry objects can be connected to a simple linked list. </p>

</div>
</div>
<a class="anchor" id="ga2f65107a03de82fff4ae2e1340195a7f"></a><!-- doxytag: member="acl.h::ci_acl_spec_t" ref="ga2f65107a03de82fff4ae2e1340195a7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct ci_acl_spec <a class="el" href="group__ACL.html#ga2f65107a03de82fff4ae2e1340195a7f">ci_acl_spec_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This struct holds an access control list (acl). </p>
<p>Imagine the following access control list defined in the c-icap config file:<br/>
 </p>
<div class="fragment"><pre class="fragment"> acl LOCALNET 127.0.0.1/255.255.255.255 192.168.1.0/255.255.255.0
</pre></div><p> This struct represents access control lists like the above </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga9ed5d0d0d59486ddb28453c9fcda9fc9"></a><!-- doxytag: member="acl.h::ci_access_entry_add_acl_by_name" ref="ga9ed5d0d0d59486ddb28453c9fcda9fc9" args="(ci_access_entry_t *access_entry, const char *aclname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_access_entry_add_acl_by_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> *&nbsp;</td>
          <td class="paramname"> <em>access_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>aclname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add an acl to an access entry object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>access_entry</em>&nbsp;</td><td>Pointer to the access entry object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aclname</em>&nbsp;</td><td>The name of the acl to be added. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non zero on success, zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga8e5833ad80ae63dc66bff07f398f0d89"></a><!-- doxytag: member="acl.h::ci_access_entry_match_request" ref="ga8e5833ad80ae63dc66bff07f398f0d89" args="(ci_access_entry_t *access_entry, ci_request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_access_entry_match_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> *&nbsp;</td>
          <td class="paramname"> <em>access_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__REQUEST.html#ga27da5c4ae491f527ce36901c2e78ea04">ci_request_t</a> *&nbsp;</td>
          <td class="paramname"> <em>req</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if an access entries list matches a request object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>access_entry</em>&nbsp;</td><td>Pointer to the access entries list (a linked list of ci_access_entry_t objects) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>pointer to the request object (ci_request_t object) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>CI_ACCESS_ALLOW if request matches the access list, CI_ACCESS_DENY otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga8b59d23a19247a61b2df28fc59105857"></a><!-- doxytag: member="acl.h::ci_access_entry_new" ref="ga8b59d23a19247a61b2df28fc59105857" args="(ci_access_entry_t **list, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a>* ci_access_entry_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> **&nbsp;</td>
          <td class="paramname"> <em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Append a new access entry object to an access entries list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>list</em>&nbsp;</td><td>Pointer to the access entry list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>CI_ACCESS_ALLOW if CI_ACCESS_DENY to specify if this access entry holds an "allow" or "deny" access control list </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer to the newly created access entry object </dd></dl>

</div>
</div>
<a class="anchor" id="ga46037760b7492e44238569bfce1174d8"></a><!-- doxytag: member="acl.h::ci_access_entry_release" ref="ga46037760b7492e44238569bfce1174d8" args="(ci_access_entry_t *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ci_access_entry_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ACL.html#ga569aa156e347e7912a7bf8610c1f6ca3">ci_access_entry_t</a> *&nbsp;</td>
          <td class="paramname"> <em>list</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroy an access entries list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>list</em>&nbsp;</td><td>Pointer to the access entries list </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga41b34ceca3b185d3211b93247b9740e4"></a><!-- doxytag: member="acl.h::ci_acl_init" ref="ga41b34ceca3b185d3211b93247b9740e4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ci_acl_init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the c-icap acl subsystem. </p>
<p>It is not thread safe </p>

</div>
</div>
<a class="anchor" id="gafaff86f39deca56d4cfa2b86e9a333d9"></a><!-- doxytag: member="acl.h::ci_acl_reset" ref="gafaff86f39deca56d4cfa2b86e9a333d9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ci_acl_reset </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resets the c-icap acl subsystem. </p>
<p>It is not thread safe </p>

</div>
</div>
<a class="anchor" id="ga20a6c804c70afdb1fe0ec28a516e113f"></a><!-- doxytag: member="acl.h::ci_acl_type_add" ref="ga20a6c804c70afdb1fe0ec28a516e113f" args="(const ci_acl_type_t *type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ci_acl_type_add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structci__acl__type.html">ci_acl_type_t</a> *&nbsp;</td>
          <td class="paramname"> <em>type</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a custom acl type to the c-icap acl subsystem. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Pointer to the c-acl_type_t struct which implements the acl type </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>non zero on success, zero otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ga7ee2105ebc7574e0e0a73e9a0069cbdb"></a><!-- doxytag: member="acl.h::ci_acl_type_search" ref="ga7ee2105ebc7574e0e0a73e9a0069cbdb" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structci__acl__type.html">ci_acl_type_t</a>* ci_acl_type_search </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Search for an acl type. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The name of the acl type </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the ci_acl_type_t structure which implements the acl type, or NULL </dd></dl>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 14 Jun 2016 for c-icap-doc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
