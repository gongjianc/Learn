\hypertarget{group__DATATYPE}{
\section{Data type recogintion api}
\label{group__DATATYPE}\index{Data type recogintion api@{Data type recogintion api}}
}


Macros, functions and structures used for data type recognition.  
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct ci\_\-magics\_\-db $\ast$ \hyperlink{group__DATATYPE_ga61edd8dcf006a279f7f310b5304c9127}{ci\_\-magic\_\-db\_\-load} (const char $\ast$filename)
\begin{DoxyCompactList}\small\item\em Read the magics db from a file and create a ci\_\-magics\_\-db object. \item\end{DoxyCompactList}\item 
int \hyperlink{group__DATATYPE_gafe67d34b80c1d9e4025201a8e54bd6d0}{ci\_\-magic\_\-req\_\-data\_\-type} (\hyperlink{group__REQUEST_ga27da5c4ae491f527ce36901c2e78ea04}{ci\_\-request\_\-t} $\ast$req, int $\ast$isencoded)
\begin{DoxyCompactList}\small\item\em Return the type of data of an c-\/icap request object. \item\end{DoxyCompactList}\item 
int \hyperlink{group__DATATYPE_ga46e48196d9902618161bdc1e160e8c00}{ci\_\-magic\_\-type\_\-id} (const char $\ast$name)
\begin{DoxyCompactList}\small\item\em Finds the type id from type name. \item\end{DoxyCompactList}\item 
int \hyperlink{group__DATATYPE_ga5f080fa00aab37ca373b4b695d68aafa}{ci\_\-magic\_\-group\_\-id} (const char $\ast$group)
\begin{DoxyCompactList}\small\item\em Finds the group id from group name. \item\end{DoxyCompactList}\item 
int \hyperlink{group__DATATYPE_ga7982eeaaf7bec51490a0409382db447a}{ci\_\-magic\_\-group\_\-check} (int type, int group)
\begin{DoxyCompactList}\small\item\em Checks if a magic type belongs to a magic types group. \item\end{DoxyCompactList}\item 
int \hyperlink{group__DATATYPE_ga4b6d1fb7ebd31e751d2bae64e7ee042b}{ci\_\-magic\_\-types\_\-count} ()
\begin{DoxyCompactList}\small\item\em The number of types stored in internal magic db. \item\end{DoxyCompactList}\item 
int \hyperlink{group__DATATYPE_gabf2d67fabccd0c3776d628345413d5ae}{ci\_\-magic\_\-groups\_\-count} ()
\begin{DoxyCompactList}\small\item\em The number of groups stored in internal magic db. \item\end{DoxyCompactList}\item 
char $\ast$ \hyperlink{group__DATATYPE_ga2d765f13e58b595e7a95ec025118af8b}{ci\_\-magic\_\-type\_\-name} (int type)
\begin{DoxyCompactList}\small\item\em Retrieve the name of a magic type. \item\end{DoxyCompactList}\item 
char $\ast$ \hyperlink{group__DATATYPE_gaea712bbaee4aff2770275cd61a9bf92b}{ci\_\-magic\_\-type\_\-descr} (int type)
\begin{DoxyCompactList}\small\item\em Retrieve the short description of a magic type. \item\end{DoxyCompactList}\item 
char $\ast$ \hyperlink{group__DATATYPE_ga0862bc88a22fcb42f18b2a48bf56ddd0}{ci\_\-magic\_\-group\_\-name} (int group)
\begin{DoxyCompactList}\small\item\em Retrieve the name of a magic types group. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Macros, functions and structures used for data type recognition. 

\subsection{Function Documentation}
\hypertarget{group__DATATYPE_ga61edd8dcf006a279f7f310b5304c9127}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-db\_\-load@{ci\_\-magic\_\-db\_\-load}}
\index{ci\_\-magic\_\-db\_\-load@{ci\_\-magic\_\-db\_\-load}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-db\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}struct ci\_\-magics\_\-db$\ast$ ci\_\-magic\_\-db\_\-load (const char $\ast$ {\em filename})\hspace{0.3cm}{\ttfamily  \mbox{[}read\mbox{]}}}}
\label{group__DATATYPE_ga61edd8dcf006a279f7f310b5304c9127}


Read the magics db from a file and create a ci\_\-magics\_\-db object. The user normaly does not need to call this function inside c-\/icap server. It is not a thread safe function, should called only during icap library initialization before threads started. 
\begin{DoxyParams}{Parameters}
\item[{\em filename}]is the name of the file contains the db \end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a ci\_\-magics\_\-db object 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_ga7982eeaaf7bec51490a0409382db447a}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-group\_\-check@{ci\_\-magic\_\-group\_\-check}}
\index{ci\_\-magic\_\-group\_\-check@{ci\_\-magic\_\-group\_\-check}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-group\_\-check}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-magic\_\-group\_\-check (int {\em type}, \/  int {\em group})}}
\label{group__DATATYPE_ga7982eeaaf7bec51490a0409382db447a}


Checks if a magic type belongs to a magic types group. 
\begin{DoxyParams}{Parameters}
\item[{\em type}]is the type id to check \item[{\em group}]is the group id \end{DoxyParams}
\begin{DoxyReturn}{Returns}
non zero if the type belongs to group, zero otherwise 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_ga5f080fa00aab37ca373b4b695d68aafa}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-group\_\-id@{ci\_\-magic\_\-group\_\-id}}
\index{ci\_\-magic\_\-group\_\-id@{ci\_\-magic\_\-group\_\-id}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-group\_\-id}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-magic\_\-group\_\-id (const char $\ast$ {\em group})}}
\label{group__DATATYPE_ga5f080fa00aab37ca373b4b695d68aafa}


Finds the group id from group name. 
\begin{DoxyParams}{Parameters}
\item[{\em group}]is the name of the group \end{DoxyParams}
\begin{DoxyReturn}{Returns}
the group id 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_ga0862bc88a22fcb42f18b2a48bf56ddd0}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-group\_\-name@{ci\_\-magic\_\-group\_\-name}}
\index{ci\_\-magic\_\-group\_\-name@{ci\_\-magic\_\-group\_\-name}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-group\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ ci\_\-magic\_\-group\_\-name (int {\em group})}}
\label{group__DATATYPE_ga0862bc88a22fcb42f18b2a48bf56ddd0}


Retrieve the name of a magic types group. 
\begin{DoxyParams}{Parameters}
\item[{\em group}]the group id \end{DoxyParams}
\begin{DoxyReturn}{Returns}
the name of the group or NULL if the group does not exists 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_gabf2d67fabccd0c3776d628345413d5ae}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-groups\_\-count@{ci\_\-magic\_\-groups\_\-count}}
\index{ci\_\-magic\_\-groups\_\-count@{ci\_\-magic\_\-groups\_\-count}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-groups\_\-count}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-magic\_\-groups\_\-count ()}}
\label{group__DATATYPE_gabf2d67fabccd0c3776d628345413d5ae}


The number of groups stored in internal magic db. \begin{DoxyReturn}{Returns}
the number of stored magic groups 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_gafe67d34b80c1d9e4025201a8e54bd6d0}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-req\_\-data\_\-type@{ci\_\-magic\_\-req\_\-data\_\-type}}
\index{ci\_\-magic\_\-req\_\-data\_\-type@{ci\_\-magic\_\-req\_\-data\_\-type}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-req\_\-data\_\-type}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-magic\_\-req\_\-data\_\-type ({\bf ci\_\-request\_\-t} $\ast$ {\em req}, \/  int $\ast$ {\em isencoded})}}
\label{group__DATATYPE_gafe67d34b80c1d9e4025201a8e54bd6d0}


Return the type of data of an c-\/icap request object. This function checks the preview data of the request. If the data are encoded this function try to uncompress them before data type recognition


\begin{DoxyParams}{Parameters}
\item[{\em req}]the c-\/icap request (ci\_\-request\_\-t) data \item[{\em isencoded}]set to CI\_\-ENCODE\_\-GZIP, CI\_\-ENCODE\_\-DEFLATE or CI\_\-ENCODE\_\-UNKNOWN if the data are encoded with an unknown method \end{DoxyParams}
\begin{DoxyReturn}{Returns}
the data type or -\/1 if the data type recognition fails for a reason (eg no preview data, of library not initialized) 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_gaea712bbaee4aff2770275cd61a9bf92b}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-type\_\-descr@{ci\_\-magic\_\-type\_\-descr}}
\index{ci\_\-magic\_\-type\_\-descr@{ci\_\-magic\_\-type\_\-descr}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-type\_\-descr}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ ci\_\-magic\_\-type\_\-descr (int {\em type})}}
\label{group__DATATYPE_gaea712bbaee4aff2770275cd61a9bf92b}


Retrieve the short description of a magic type. 
\begin{DoxyParams}{Parameters}
\item[{\em type}]the type id \end{DoxyParams}
\begin{DoxyReturn}{Returns}
the short description if the type or NULL if the type does not exists 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_ga46e48196d9902618161bdc1e160e8c00}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-type\_\-id@{ci\_\-magic\_\-type\_\-id}}
\index{ci\_\-magic\_\-type\_\-id@{ci\_\-magic\_\-type\_\-id}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-type\_\-id}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-magic\_\-type\_\-id (const char $\ast$ {\em name})}}
\label{group__DATATYPE_ga46e48196d9902618161bdc1e160e8c00}


Finds the type id from type name. 
\begin{DoxyParams}{Parameters}
\item[{\em name}]is the name of the magic type \end{DoxyParams}
\begin{DoxyReturn}{Returns}
the type id 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_ga2d765f13e58b595e7a95ec025118af8b}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-type\_\-name@{ci\_\-magic\_\-type\_\-name}}
\index{ci\_\-magic\_\-type\_\-name@{ci\_\-magic\_\-type\_\-name}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-type\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ ci\_\-magic\_\-type\_\-name (int {\em type})}}
\label{group__DATATYPE_ga2d765f13e58b595e7a95ec025118af8b}


Retrieve the name of a magic type. 
\begin{DoxyParams}{Parameters}
\item[{\em type}]the type id \end{DoxyParams}
\begin{DoxyReturn}{Returns}
the name of the type or NULL if the type does not exists 
\end{DoxyReturn}
\hypertarget{group__DATATYPE_ga4b6d1fb7ebd31e751d2bae64e7ee042b}{
\index{DATATYPE@{DATATYPE}!ci\_\-magic\_\-types\_\-count@{ci\_\-magic\_\-types\_\-count}}
\index{ci\_\-magic\_\-types\_\-count@{ci\_\-magic\_\-types\_\-count}!DATATYPE@{DATATYPE}}
\subsubsection[{ci\_\-magic\_\-types\_\-count}]{\setlength{\rightskip}{0pt plus 5cm}int ci\_\-magic\_\-types\_\-count ()}}
\label{group__DATATYPE_ga4b6d1fb7ebd31e751d2bae64e7ee042b}


The number of types stored in internal magic db. \begin{DoxyReturn}{Returns}
the number of stored magic types 
\end{DoxyReturn}
